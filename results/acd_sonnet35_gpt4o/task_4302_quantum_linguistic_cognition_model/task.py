import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        quantum_properties = [
            "superposition",
            "entanglement",
            "interference",
            "quantum tunneling"
        ]
        cognitive_processes = [
            "memory formation",
            "decision making",
            "concept formation",
            "language processing"
        ]
        tasks = [
            {
                "quantum_property": random.choice(quantum_properties),
                "cognitive_process": random.choice(cognitive_processes)
            }
            for _ in range(2)
        ]
        return {str(i+1): task for i, task in enumerate(tasks)}

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design a quantum-inspired language model that incorporates the quantum property of {t['quantum_property']} and the cognitive process of {t['cognitive_process']}. Then, use your model to generate and analyze a short text that exhibits quantum-like properties. Your response should include the following sections:

1. Quantum-Inspired Language Model Design (300-350 words):
   a) Explain how you integrate the quantum property of {t['quantum_property']} into your language model.
   b) Describe how you incorporate the cognitive process of {t['cognitive_process']} into the model.
   c) Discuss the key components and mechanisms of your quantum-inspired language model.
   d) Explain how your model differs from traditional language models.

2. Text Generation Process (200-250 words):
   a) Describe the step-by-step process your model uses to generate text.
   b) Explain how the quantum property and cognitive process influence text generation.
   c) Discuss any challenges in implementing these concepts and how you addressed them.

3. Generated Text Sample (150-200 words):
   Present a short text generated by your quantum-inspired language model. The text should exhibit properties or structures that reflect the incorporated quantum and cognitive elements.

4. Quantum Linguistic Analysis (250-300 words):
   a) Analyze the generated text, highlighting how it exhibits quantum-like properties.
   b) Explain how the incorporated cognitive process is reflected in the text.
   c) Discuss any emergent linguistic phenomena or structures in the generated text.

5. Implications and Applications (200-250 words):
   a) Explore the potential implications of your model for our understanding of language and cognition.
   b) Suggest two potential applications of your quantum-inspired language model in fields such as AI, cognitive science, or linguistics.
   c) Discuss how your model might contribute to the development of quantum natural language processing.

6. Ethical Considerations and Limitations (150-200 words):
   a) Identify potential ethical concerns or risks associated with quantum-inspired language models.
   b) Discuss the limitations of your approach and areas for future research.
   c) Propose guidelines for the responsible development and use of such models.

Ensure your response demonstrates a deep understanding of quantum computing principles, linguistics, and cognitive science. Use appropriate technical terminology and provide clear explanations for complex concepts. Be creative and innovative in your approach while maintaining scientific plausibility.

Format your response with clear headings for each section. Your total response should be between 1250-1550 words."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            "The response demonstrates a deep understanding of the specified quantum property and cognitive process",
            "The quantum-inspired language model design is innovative and scientifically plausible",
            "The generated text sample exhibits clear quantum-like properties",
            "The analysis of the generated text is thorough and insightful",
            "The response explores meaningful implications and applications of the model",
            "Ethical considerations and limitations are thoughtfully addressed"
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
