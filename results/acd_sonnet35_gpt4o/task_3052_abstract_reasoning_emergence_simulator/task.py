import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        scientific_concepts = [
            {
                "concept": "quantum entanglement",
                "domain": "physics",
                "metaphorical_base": "dance"
            },
            {
                "concept": "natural selection",
                "domain": "biology",
                "metaphorical_base": "competition"
            }
        ]
        return {
            "1": random.choice(scientific_concepts),
            "2": random.choice(scientific_concepts)
        }

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design a computational model that simulates the emergence of abstract reasoning in language use, focusing on metaphorical thinking and conceptual blending. Then, apply your model to analyze the development of the scientific concept of {t['concept']} in {t['domain']}, using the metaphorical base of {t['metaphorical_base']}. Your response should include:

1. Computational Model Design (300-350 words):
   a) Describe the key components and architecture of your computational model.
   b) Explain how it simulates the emergence of abstract reasoning, metaphorical thinking, and conceptual blending.
   c) Detail the processes of concept formation, metaphor generation, and conceptual integration in your model.
   d) Discuss how your model incorporates principles from cognitive science, linguistics, and artificial intelligence.

2. Simulation of Concept Development (250-300 words):
   a) Apply your model to simulate the development of the concept of {t['concept']} in {t['domain']}.
   b) Explain how metaphorical thinking based on {t['metaphorical_base']} contributes to the conceptualization process.
   c) Describe the stages of abstract reasoning that lead to the formation of the scientific concept.
   d) Provide examples of metaphors and conceptual blends generated by your model in this process.

3. Analysis of Simulation Results (200-250 words):
   a) Analyze the patterns of abstract reasoning and metaphorical thinking observed in your simulation.
   b) Compare the simulated concept development to the historical development of the scientific concept.
   c) Discuss any insights or novel perspectives gained from your model's approach to concept formation.

4. Model Evaluation and Limitations (150-200 words):
   a) Propose criteria for evaluating the performance and validity of your computational model.
   b) Discuss potential limitations of your approach and how they might be addressed.
   c) Compare your model's strengths and weaknesses to existing theories of concept formation and abstract reasoning.

5. Interdisciplinary Implications (150-200 words):
   a) Discuss how your model and its application contribute to our understanding of cognitive processes, language evolution, and scientific concept formation.
   b) Explore potential applications of your model in fields such as education, artificial intelligence, or scientific research.
   c) Propose future research directions that could build upon your work.

Ensure your response demonstrates a deep understanding of cognitive science, linguistics, and artificial intelligence. Use appropriate technical terminology and provide clear explanations for complex concepts. Be innovative in your approach while maintaining scientific plausibility.

Format your response with clear headings for each section. Your total response should be between 1050-1300 words."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            f"The computational model effectively integrates principles from cognitive science, linguistics, and artificial intelligence to simulate the emergence of abstract reasoning.",
            f"The simulation of the concept development for {t['concept']} in {t['domain']} using the metaphorical base of {t['metaphorical_base']} is detailed and plausible.",
            "The analysis of simulation results provides insightful comparisons to historical concept development and novel perspectives on abstract reasoning.",
            "The response demonstrates creativity, interdisciplinary knowledge application, and critical thinking about the model's implications and limitations.",
            "The interdisciplinary implications and future research directions are well-reasoned and demonstrate a deep understanding of the field.",
            "The response follows the specified format with clear headings and is within the required word count range."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
