import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        tasks = {
            "1": {
                "brain_area": "Broca's area",
                "linguistic_feature": "syntax",
                "ai_technique": "recurrent neural networks"
            },
            "2": {
                "brain_area": "Wernicke's area",
                "linguistic_feature": "semantics",
                "ai_technique": "transformer models"
            }
        }
        return tasks

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design a novel AI language model based on the neurological principles of language processing in {t['brain_area']}, focusing on the linguistic feature of {t['linguistic_feature']}, and incorporating {t['ai_technique']} as a key AI technique. Then, use your model to generate and analyze text samples. Your response should include the following sections:

1. Neurological Basis (250-300 words):
   a) Explain the role of {t['brain_area']} in language processing.
   b) Describe how {t['linguistic_feature']} is processed in this brain area.
   c) Discuss any relevant neuroscientific theories or models related to this process.

2. AI Model Design (300-350 words):
   a) Describe the architecture of your AI model, explaining how it mirrors the neurological processes.
   b) Explain how you've incorporated {t['ai_technique']} into your model.
   c) Discuss any novel features or innovations in your design.
   d) Provide a high-level pseudocode or diagram illustrating the key components of your model.

3. Language Generation (200-250 words):
   a) Explain how your model generates language, focusing on {t['linguistic_feature']}.
   b) Provide a short sample of text (50-100 words) generated by your model.
   c) Analyze the generated text, highlighting how it reflects the neurological principles and linguistic focus of your model.

4. Comparative Analysis (200-250 words):
   a) Compare your neuro-inspired model to traditional language models.
   b) Discuss potential advantages and limitations of your approach.
   c) Explain how your model might provide insights into human language processing.

5. Experimental Design (150-200 words):
   a) Propose an experiment to test the performance and validity of your model.
   b) Describe the methodology, including data selection, evaluation metrics, and baseline comparisons.

6. Ethical Considerations and Future Directions (150-200 words):
   a) Discuss ethical implications of developing AI models based on human neural processes.
   b) Suggest potential applications of your model in linguistics, neuroscience, or AI research.
   c) Propose ideas for expanding or improving your model in future iterations.

Ensure your response demonstrates a deep understanding of neuroscience, linguistics, and artificial intelligence. Use appropriate technical terminology and provide clear explanations where necessary. Be creative in your approach while maintaining scientific plausibility.

Format your response with clear headings for each section, numbered as above. Your total response should be between 1250-1550 words."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            f"The response includes a comprehensive explanation of {t['brain_area']} and its role in language processing, focusing on {t['linguistic_feature']}",
            f"The AI model design incorporates {t['ai_technique']} and mirrors neurological processes",
            "The language generation section includes a sample text and analysis that reflects the model's focus",
            "A thorough comparative analysis is provided, discussing advantages and limitations",
            "An appropriate experimental design is proposed to test the model's performance and validity",
            "Ethical considerations and future directions are thoughtfully addressed",
            "The response demonstrates deep understanding of neuroscience, linguistics, and AI",
            "The proposed model is creative while remaining scientifically plausible"
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
