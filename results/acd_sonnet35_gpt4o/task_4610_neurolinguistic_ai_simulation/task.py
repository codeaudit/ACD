import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        tasks = {
            "1": {
                "languages": ["Mandarin", "Spanish", "Arabic"],
                "cognitive_process": "syntax acquisition",
                "brain_region": "Broca's area",
                "linguistic_features": {
                    "Mandarin": "topic prominence",
                    "Spanish": "pro-drop",
                    "Arabic": "root-and-pattern morphology"
                }
            },
            "2": {
                "languages": ["English", "Japanese", "Swahili"],
                "cognitive_process": "semantic processing",
                "brain_region": "Wernicke's area",
                "linguistic_features": {
                    "English": "phrasal verbs",
                    "Japanese": "topic-comment structure",
                    "Swahili": "noun class system"
                }
            }
        }
        return tasks

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design and implement an AI system that simulates the neurolinguistic processes of language acquisition and processing in a multilingual environment, focusing on {', '.join(t['languages'])}. Your system should model the {t['cognitive_process']} process in the {t['brain_region']}. Then, use this system to generate and analyze novel linguistic phenomena. Your response should include the following sections, each with its own heading:

1. Neurolinguistic Model Design (300-350 words):
   a) Describe the architecture of your AI system for simulating neurolinguistic processes.
   b) Explain how your model incorporates the specified cognitive process and brain region.
   c) Detail how your system simulates language acquisition and processing across the given languages.
   d) Discuss any novel AI techniques or algorithms used in your model.

2. Multilingual Processing Simulation (250-300 words):
   a) Explain how your system simulates the acquisition and processing of the specified languages.
   b) Describe how the cognitive process and brain region interact in your model during language tasks.
   c) Provide a specific example of how your system processes the following linguistic features for each language:
      {', '.join([f'{lang}: {feature}' for lang, feature in t['linguistic_features'].items()])}

3. Novel Linguistic Phenomena Generation (200-250 words):
   a) Describe how your system generates novel linguistic phenomena based on its multilingual processing.
   b) Provide two examples of unique linguistic structures or patterns your system might produce.
   c) Explain how these novel phenomena relate to the specified cognitive process and brain region.
   d) Propose a novel neurolinguistic phenomenon that emerges from the interaction of the given languages in your model.

4. Analysis Framework (200-250 words):
   a) Propose a method for analyzing the linguistic outputs generated by your system.
   b) Explain how this analysis can provide insights into both human language processing and AI language models.
   c) Discuss any potential limitations or biases in your analysis approach.

5. Comparative Evaluation (200-250 words):
   a) Compare your neurolinguistic AI simulation to traditional language models.
   b) Discuss potential advantages and disadvantages of your approach.
   c) Speculate on how your system might perform compared to human language learners and processors.

6. Implications and Future Directions (150-200 words):
   a) Discuss what your system might reveal about human language acquisition and processing.
   b) Explain how the AI aspects of your model could provide new perspectives on neurolinguistics.
   c) Propose two future research directions that could build upon your neurolinguistic AI simulation.

Ensure your response demonstrates a deep understanding of neuroscience, linguistics, and artificial intelligence. Use appropriate technical terminology and provide clear explanations for complex concepts. Be innovative in your approach while maintaining scientific plausibility.

Your total response should be between 1300-1600 words."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            "The response demonstrates a deep understanding of neuroscience, linguistics, and artificial intelligence",
            "The AI system design effectively integrates the specified cognitive process and brain region",
            "The multilingual processing simulation addresses all given linguistic features for each language",
            "Novel linguistic phenomena are generated, including a proposed neurolinguistic phenomenon emerging from language interaction",
            "The analysis framework is well-developed and addresses potential limitations",
            "The comparative evaluation provides insightful comparisons to traditional models and human performance",
            "The implications and future directions are thoughtful and grounded in the model's capabilities",
            "The response is creative and innovative while maintaining scientific plausibility",
            "The response is well-structured with clear headings for each section and falls within the specified word count",
            "The response does not contain any direct quotes or plagiarized content from existing research papers or websites"
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
