import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        art_movements = [
            "Impressionism",
            "Surrealism",
            "Abstract Expressionism",
            "Cubism",
            "Pop Art"
        ]
        neural_processes = [
            "Visual Object Recognition",
            "Emotional Processing",
            "Spatial Reasoning",
            "Color Perception",
            "Pattern Recognition"
        ]
        tasks = [
            {
                "art_movement": movement,
                "neural_process": process
            }
            for movement in art_movements
            for process in neural_processes
        ]
        return {str(i+1): task for i, task in enumerate(random.sample(tasks, 2))}

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design an AI system that analyzes brain activity during art perception and generates new artworks based on neural patterns. Then, use your system to create a piece inspired by {t['art_movement']}, focusing on the neural process of {t['neural_process']}. Your response should include:

1. Neuro-Art AI System Architecture (300-350 words):
   a) Describe the key components of your AI system for analyzing brain activity and generating art.
   b) Explain how your system integrates neuroscience, art history, and AI algorithms.
   c) Detail how the system captures and interprets brain activity data related to art perception.
   d) Include a simple diagram or flowchart illustrating your system's architecture.

2. Neural-Artistic Mapping (250-300 words):
   a) Explain your approach to mapping specific neural patterns to artistic elements.
   b) Discuss how you ensure the generated artwork is both neuroscientifically representative and aesthetically coherent.
   c) Provide an example of how a particular neural pattern would be translated into an artistic feature.

3. Art Movement Analysis (200-250 words):
   a) Briefly analyze the key characteristics of {t['art_movement']}.
   b) Explain how your system would capture and represent these characteristics in its generative process.
   c) Discuss any challenges in accurately representing this art movement through AI-generated art.

4. Neural Process Integration (200-250 words):
   a) Describe how your system specifically incorporates the neural process of {t['neural_process']} in its art generation.
   b) Explain the choice of artistic elements used to represent this neural process.
   c) Discuss any novel insights this integration might offer into the relationship between brain function and artistic creation.

5. AI Art Generation Process (250-300 words):
   a) Outline the steps your AI system takes to generate a complete artwork.
   b) Explain how the system ensures artistic coherence while accurately representing both the art movement and neural process.
   c) Discuss any novel techniques your AI employs in the creative process.

6. Generated Artwork Description (200-250 words):
   Present a detailed description of an artwork generated by your AI system that represents {t['art_movement']} and focuses on {t['neural_process']}. Include:
   a) The overall composition and visual elements of the piece.
   b) Specific artistic features and how they relate to characteristics of the art movement and neural process.
   c) How the artwork reflects the integration of neuroscientific data and artistic style.

7. Potential Applications and Implications (150-200 words):
   a) Discuss potential applications of your neuro-art AI system in fields such as neuroscience research, art therapy, or artistic innovation.
   b) Analyze the implications of this technology for our understanding of creativity, cognition, and artistic expression.
   c) Address any ethical considerations or potential misuses of this technology.

Ensure your response demonstrates a deep understanding of neuroscience, art history, and AI technologies. Be innovative in your approach while maintaining scientific and artistic plausibility. Use appropriate terminology from all relevant fields and provide explanations where necessary.

Format your response with clear headings for each section. Your total response should be between 1550-1900 words. Include a word count at the end of your response."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            "The response demonstrates a deep understanding of neuroscience, art history, and AI technologies",
            "The proposed AI system architecture is well-explained and integrates all required elements",
            f"The system effectively incorporates characteristics of {t['art_movement']} and the neural process of {t['neural_process']}",
            "The neural-artistic mapping and art generation process are clearly explained and scientifically plausible",
            "The generated artwork description effectively combines neuroscientific insights with artistic elements",
            "The response addresses potential applications, implications, and ethical considerations",
            "The response is innovative while maintaining scientific and artistic plausibility",
            "The response adheres to the specified format and word count guidelines"
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
