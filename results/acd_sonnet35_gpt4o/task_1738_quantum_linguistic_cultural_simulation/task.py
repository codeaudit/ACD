import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        cultural_aspects = [
            "Religious beliefs",
            "Economic systems",
            "Social hierarchies",
            "Artistic expressions",
            "Technological advancements"
        ]
        linguistic_features = [
            "Phonological systems",
            "Syntactic structures",
            "Semantic networks",
            "Pragmatic norms",
            "Writing systems"
        ]
        quantum_principles = [
            "Superposition",
            "Entanglement",
            "Quantum tunneling",
            "Wave function collapse",
            "Quantum interference"
        ]
        tasks = {
            "1": {
                "cultural_aspect": random.choice(cultural_aspects),
                "linguistic_feature": random.choice(linguistic_features),
                "quantum_principle": random.choice(quantum_principles)
            },
            "2": {
                "cultural_aspect": random.choice(cultural_aspects),
                "linguistic_feature": random.choice(linguistic_features),
                "quantum_principle": random.choice(quantum_principles)
            }
        }
        return tasks

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design a quantum computing simulation that models the evolution of language and culture in a hypothetical multiverse, then use it to solve a complex anthropological problem. Your simulation should focus on the cultural aspect of {t['cultural_aspect']}, the linguistic feature of {t['linguistic_feature']}, and incorporate the quantum principle of {t['quantum_principle']}. Your response should include:

1. Quantum Simulation Design (250-300 words):
   a) Describe the key components of your quantum simulation for modeling language and culture evolution.
   b) Explain how you incorporate the specified quantum principle into your model.
   c) Detail how your simulation represents and processes cultural and linguistic information.
   d) Provide a high-level quantum circuit diagram or algorithm description for a crucial part of your simulation.

2. Multiverse Cultural-Linguistic Model (200-250 words):
   a) Explain how your model simulates multiple parallel universes with diverging cultural and linguistic evolution.
   b) Describe how the specified cultural aspect and linguistic feature are represented and evolve in your model.
   c) Discuss how quantum effects in your simulation influence cultural and linguistic development across the multiverse.

3. Anthropological Problem and Solution (200-250 words):
   a) Formulate a complex anthropological problem related to the specified cultural aspect and linguistic feature.
   b) Describe how you would use your quantum simulation to address this problem.
   c) Provide a step-by-step explanation of how your simulation would generate and evaluate potential solutions.

4. Interpretation and Analysis (150-200 words):
   a) Interpret the results of your simulation in terms of real-world anthropological and linguistic theories.
   b) Discuss any novel insights or hypotheses generated by your quantum cultural-linguistic model.
   c) Propose an experiment or field study to validate these insights in the real world.

5. Ethical and Philosophical Implications (150-200 words):
   a) Discuss the ethical considerations of using quantum simulations to model human cultures and languages.
   b) Explore the philosophical implications of your model for concepts of cultural identity and linguistic relativity.
   c) Consider potential societal impacts if such quantum cultural-linguistic simulations became widely used.

6. Limitations and Future Directions (100-150 words):
   a) Identify key limitations of your current quantum simulation model.
   b) Propose two potential improvements or extensions to your model for future research.
   c) Suggest one way your approach could be applied to other areas of social sciences or humanities.

Ensure your response demonstrates a deep understanding of quantum computing, linguistics, anthropology, and complex systems modeling. Be creative and innovative in your approach while maintaining scientific plausibility. Use appropriate technical terminology from all relevant fields and provide clear explanations for complex concepts.

Format your response with clear headings for each section. Your total response should be between 1050-1350 words."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            f"The response includes a comprehensive quantum simulation design that incorporates {t['quantum_principle']}.",
            f"The multiverse cultural-linguistic model effectively represents and evolves {t['cultural_aspect']} and {t['linguistic_feature']}.",
            "The anthropological problem and its quantum simulation-based solution are well-formulated and explained.",
            "The interpretation and analysis provide novel insights and a feasible validation experiment.",
            "Ethical and philosophical implications are thoroughly discussed.",
            "Limitations and future directions are clearly identified and proposed.",
            "The response demonstrates deep understanding and creative integration of quantum computing, linguistics, and anthropology."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
