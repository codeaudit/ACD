import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        artworks = [
            {
                "title": "The Starry Night",
                "artist": "Vincent van Gogh",
                "year": 1889,
                "style": "Post-Impressionism",
                "elements": ["swirling clouds", "bright crescent moon", "stars", "stylized cypress tree", "village"],
                "colors": ["deep blue", "yellow", "pale yellow", "green", "white"],
                "brushwork": "bold, expressive strokes",
                "composition": "dynamic, swirling motion",
                "emotional_tone": "turbulent, dreamlike"
            },
            {
                "title": "The Persistence of Memory",
                "artist": "Salvador DalÃ­",
                "year": 1931,
                "style": "Surrealism",
                "elements": ["melting clocks", "barren landscape", "distorted face", "ants", "orange clock"],
                "colors": ["warm earth tones", "blue", "orange", "brown"],
                "brushwork": "smooth, precise rendering",
                "composition": "dreamlike juxtaposition of objects",
                "emotional_tone": "unsettling, mysterious"
            }
        ]
        return {str(i+1): artwork for i, artwork in enumerate(artworks)}

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design an AI system that analyzes and recreates artistic styles based on neurological principles of visual processing and creativity. Then, use this system to analyze {t['title']} by {t['artist']} and generate a novel piece. Your response should include:

1. System Design (300-350 words):
   a) Describe the key components of your AI system, including how it incorporates neurological principles of visual processing and creativity.
   b) Explain how your system analyzes artistic styles, considering elements like color, form, composition, and brushwork.
   c) Detail how your system generates new artworks based on its analysis.
   d) Discuss how your system integrates theories of neuroaesthetics and computational creativity.
   e) Include a diagram or flowchart of your system's architecture (describe it textually).

2. Artwork Analysis (250-300 words):
   a) Use your AI system to analyze {t['title']} by {t['artist']}.
   b) Describe the key features and stylistic elements identified by your system, including colors, brushwork, composition, and emotional tone.
   c) Explain how your system interprets these elements in terms of neurological visual processing.
   d) Discuss any insights your system provides about the artist's creative process or the artwork's emotional impact.

3. Novel Artwork Generation (250-300 words):
   a) Describe a novel artwork generated by your AI system inspired by {t['title']}.
   b) Explain how this new piece incorporates elements of the original while creating something unique.
   c) Discuss how your system's understanding of neurological principles influenced the generation process.
   d) Provide a detailed textual description of the generated artwork, including its composition, colors, brushwork, and emotional tone.

4. Comparative Analysis (200-250 words):
   a) Compare your AI system's approach to traditional methods of art analysis and creation.
   b) Discuss potential advantages and limitations of your neuroaesthetic AI approach.
   c) Analyze how your system's output might differ from human-created art in the same style.

5. Ethical and Philosophical Implications (200-250 words):
   a) Discuss the ethical implications of using AI to analyze and recreate artistic styles.
   b) Explore the philosophical questions raised by your system regarding creativity, consciousness, and the nature of art.
   c) Consider potential impacts on the art world and society if such systems become widespread.

6. Future Directions (150-200 words):
   a) Propose two potential improvements or extensions to your AI system.
   b) Suggest a novel application of your system in a field outside of visual art.
   c) Discuss how your system could contribute to our understanding of human creativity and cognition.

Ensure your response demonstrates a deep understanding of neuroscience, artificial intelligence, and art history. Use appropriate terminology from all fields and provide clear explanations where necessary. Be creative and original in your approach while maintaining scientific plausibility.

Format your response with clear headings for each section, numbered as above (e.g., '1. System Design'). Adhere strictly to the word count for each section. Your total response should be between 1350-1650 words. Include a word count at the end of your response."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            "The response demonstrates a deep understanding of neuroscience, artificial intelligence, and art history, using appropriate terminology from all fields",
            "The AI system design incorporates specific neurological principles of visual processing and creativity, with a clear explanation of how they are applied",
            "The artwork analysis includes detailed observations about colors, brushwork, composition, and emotional tone, linking them to neurological visual processing",
            "The novel artwork generation provides a vivid, detailed description that clearly demonstrates inspiration from the original while being unique",
            "The comparative analysis, ethical implications, and future directions sections show critical thinking and original insights",
            "The response adheres to the specified format and word count for each section",
            "The ideas presented are original and creative while maintaining scientific plausibility"
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
