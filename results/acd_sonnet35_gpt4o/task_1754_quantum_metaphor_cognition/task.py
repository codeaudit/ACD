import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        quantum_principles = ['superposition', 'entanglement', 'interference']
        cognitive_processes = ['attention', 'memory', 'reasoning']
        metaphor_types = ['conceptual', 'orientational', 'ontological']
        example_metaphors = {
            'conceptual': 'Time is money',
            'orientational': 'Happy is up, sad is down',
            'ontological': 'The mind is a machine'
        }
        
        return {
            "1": {
                "quantum_principle": random.choice(quantum_principles),
                "cognitive_process": random.choice(cognitive_processes),
                "metaphor_type": random.choice(metaphor_types),
                "example_metaphor": example_metaphors[random.choice(list(example_metaphors.keys()))]
            },
            "2": {
                "quantum_principle": random.choice(quantum_principles),
                "cognitive_process": random.choice(cognitive_processes),
                "metaphor_type": random.choice(metaphor_types),
                "example_metaphor": example_metaphors[random.choice(list(example_metaphors.keys()))]
            }
        }

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design a quantum-inspired language model for metaphor generation and interpretation, incorporating the quantum principle of {t['quantum_principle']}, the cognitive process of {t['cognitive_process']}, and focusing on {t['metaphor_type']} metaphors. Then, analyze its potential impact on our understanding of human cognition and language processing. Your response should include:

1. Model Architecture (300-350 words):
   a) Describe the overall structure of your quantum-inspired language model.
   b) Explain how it incorporates the specified quantum principle ({t['quantum_principle']}).
   c) Detail how the model integrates the cognitive process ({t['cognitive_process']}).
   d) Discuss how the model specifically handles {t['metaphor_type']} metaphors.
   e) Provide a diagram or pseudocode representation of your model's key components.

2. Quantum-Cognitive Integration (250-300 words):
   a) Explain how quantum and cognitive components interact in your model.
   b) Discuss any novel approaches to quantum-cognitive interfacing in your design.
   c) Describe how this integration enhances metaphor processing capabilities.
   d) Compare your approach to a classical (non-quantum) cognitive model for metaphor processing.

3. Metaphor Generation and Interpretation (250-300 words):
   a) Provide an example of a {t['metaphor_type']} metaphor generated by your model.
   b) Explain the generation process, highlighting the roles of the quantum principle and cognitive process.
   c) Demonstrate how your model would interpret the given metaphor: "{t['example_metaphor']}", explaining each step.
   d) Compare your model's interpretation to potential human interpretations.

4. Cognitive Impact Analysis (250-300 words):
   a) Analyze how your model's approach to metaphor processing might reflect or diverge from human cognition.
   b) Discuss potential insights into the relationship between quantum phenomena, cognition, and language.
   c) Propose a testable hypothesis about human metaphor comprehension based on your model.
   d) Suggest an experimental design to test this hypothesis.

5. Limitations and Future Directions (200-250 words):
   a) Identify potential limitations or challenges in your quantum-cognitive approach to metaphor processing.
   b) Suggest areas for future research or expansion of your model.
   c) Discuss ethical considerations in developing and using such a model.
   d) Propose a potential real-world application of your model.

Ensure your response demonstrates a deep understanding of quantum computing principles, cognitive science, and linguistics. Be creative in your approach while maintaining scientific plausibility and rigor. Use appropriate terminology and provide clear explanations of complex concepts.

Format your response with clear headings for each section, numbered as above. Use appropriate subheadings for subsections. Your total response should be between 1250-1500 words. Include a word count at the end of your submission."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            f"The response accurately incorporates and explains the quantum principle of {t['quantum_principle']} in the model design.",
            f"The model effectively integrates the cognitive process of {t['cognitive_process']} in its architecture and function.",
            f"The approach to generating and interpreting {t['metaphor_type']} metaphors is creative, scientifically plausible, and properly incorporates the quantum-cognitive framework.",
            f"The model successfully interprets the given example metaphor: \"{t['example_metaphor']}\" using the quantum-cognitive approach.",
            "The analysis of cognitive impact shows depth of thought and sophisticated interdisciplinary reasoning, with a well-formulated testable hypothesis.",
            "The limitations, future directions, and ethical considerations are comprehensive and demonstrate a nuanced understanding of the field.",
            "The response follows the specified format, including all required sections and subsections, and adheres to the given word limit.",
            "The proposed model demonstrates novelty and potential for advancing our understanding of human cognition and language processing."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
