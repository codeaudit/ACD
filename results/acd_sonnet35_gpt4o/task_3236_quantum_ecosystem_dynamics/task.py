import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        quantum_principles = [
            'Superposition',
            'Entanglement',
            'Quantum tunneling',
            'Wave function collapse'
        ]
        ecosystem_types = [
            'Coral reef',
            'Tropical rainforest',
            'Arctic tundra',
            'Savanna grassland'
        ]
        ecological_processes = [
            'Nutrient cycling',
            'Energy flow',
            'Species interaction',
            'Succession'
        ]
        return {
            "1": {
                "quantum_principle": random.choice(quantum_principles),
                "ecosystem_type": random.choice(ecosystem_types),
                "ecological_process": random.choice(ecological_processes)
            },
            "2": {
                "quantum_principle": random.choice(quantum_principles),
                "ecosystem_type": random.choice(ecosystem_types),
                "ecological_process": random.choice(ecological_processes)
            }
        }

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design a quantum-inspired AI system for analyzing and predicting complex ecosystem dynamics, integrating principles from quantum physics, ecology, and information theory. Your system should incorporate the quantum principle of {t['quantum_principle']}, focus on the ecosystem type of {t['ecosystem_type']}, and address the ecological process of {t['ecological_process']}.

Your response should include the following sections:

1. System Architecture (300-350 words):
   a) Describe the key components of your quantum-inspired AI system for ecosystem analysis.
   b) Explain how the system incorporates the specified quantum principle into its design.
   c) Detail how the system models and analyzes the given ecosystem type and ecological process.
   d) Discuss how information theory is utilized in your system's approach to ecosystem dynamics.

2. Quantum-Ecological Integration (250-300 words):
   a) Explain how the specified quantum principle is applied to model ecosystem dynamics.
   b) Describe how this integration enhances our understanding of the given ecological process.
   c) Provide a conceptual or mathematical representation of this integration (use LaTeX formatting for equations if needed).

3. Predictive Capabilities (250-300 words):
   a) Outline how your system predicts future states or behaviors of the ecosystem.
   b) Describe the data inputs required and the types of outputs generated by your system.
   c) Explain how the system handles uncertainty and complexity in ecosystem dynamics.
   d) Provide an example scenario demonstrating your system's predictive capabilities for the given ecosystem type and ecological process.

4. Comparative Analysis (200-250 words):
   a) Compare your quantum-inspired approach to traditional methods of ecosystem modeling and analysis.
   b) Discuss potential advantages and limitations of your system.
   c) Explain how your system might provide new insights into ecosystem dynamics that traditional approaches miss.

5. Ethical and Environmental Implications (150-200 words):
   a) Discuss the potential impacts of using such a system for ecosystem management and conservation.
   b) Address any ethical concerns related to applying quantum-inspired AI to natural systems.
   c) Propose guidelines for the responsible use of your system in ecological research and environmental policy-making.

6. Future Research Directions (150-200 words):
   a) Suggest areas for further research in applying quantum-inspired AI to ecology.
   b) Propose an experiment to test the accuracy and effectiveness of your system.
   c) Discuss how your approach might influence the development of more advanced ecosystem modeling techniques.

Ensure your response demonstrates a deep understanding of quantum physics, ecology, and information theory. Use appropriate technical terminology and provide clear explanations for complex concepts. Be innovative in your approach while maintaining scientific plausibility and ecological relevance.

Format your response with clear headings for each section. Your total response should be between 1300-1600 words."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            f"The response effectively integrates the quantum principle of {t['quantum_principle']}, the ecosystem type of {t['ecosystem_type']}, and the ecological process of {t['ecological_process']}.",
            "The system design demonstrates a deep understanding of quantum physics, ecology, and information theory principles.",
            "The response provides creative and scientifically plausible solutions to the challenge of quantum-inspired ecosystem dynamics analysis.",
            "The predictive capabilities and comparative analysis sections effectively demonstrate the potential advantages of the proposed system.",
            "The response addresses ethical implications and future research directions in a thoughtful and relevant manner."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
