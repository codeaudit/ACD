import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        tasks = [
            {
                "quantum_concept": "superposition",
                "linguistic_task": "metaphor generation",
                "creative_domain": "poetry"
            },
            {
                "quantum_concept": "entanglement",
                "linguistic_task": "semantic disambiguation",
                "creative_domain": "storytelling"
            },
            {
                "quantum_concept": "quantum tunneling",
                "linguistic_task": "language evolution simulation",
                "creative_domain": "speculative fiction"
            },
            {
                "quantum_concept": "quantum annealing",
                "linguistic_task": "text summarization",
                "creative_domain": "scientific writing"
            }
        ]
        return {str(i+1): task for i, task in enumerate(random.sample(tasks, k=2))}

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"Design a quantum-inspired system for navigating and manipulating semantic spaces, focusing on the quantum concept of {t['quantum_concept']}. Then, apply your system to the linguistic task of {t['linguistic_task']} and demonstrate its creative application in the domain of {t['creative_domain']}. Your response should include the following sections:\n\n1. Quantum-Linguistic Framework (250-300 words):\n   a) Explain how you incorporate {t['quantum_concept']} into a model of semantic space.\n   b) Describe how this quantum-inspired approach represents and manipulates meaning.\n   c) Discuss potential advantages over classical NLP techniques.\n\n2. System Architecture (200-250 words):\n   a) Outline the key components of your quantum-inspired semantic navigation system.\n   b) Explain how classical and quantum-inspired elements interact in your design.\n   c) Describe any novel algorithms or techniques used in your system.\n\n3. Application to {t['linguistic_task']} (250-300 words):\n   a) Explain how your system approaches the task of {t['linguistic_task']}.\n   b) Provide a step-by-step example of your system performing this task.\n   c) Discuss how the quantum-inspired approach enhances performance or capabilities in this task.\n\n4. Creative Application in {t['creative_domain']} (200-250 words):\n   a) Describe how your system can be used to enhance creativity in {t['creative_domain']}.\n   b) Provide a concrete example of creative content generated by your system.\n   c) Analyze the unique aspects of the generated content that arise from the quantum-inspired approach.\n\n5. Theoretical Implications (150-200 words):\n   a) Discuss the implications of your system for our understanding of language and meaning.\n   b) Explore potential connections between quantum phenomena and linguistic or cognitive processes.\n\n6. Limitations and Future Directions (150-200 words):\n   a) Identify current limitations of your quantum-inspired approach.\n   b) Propose future research directions to address these limitations.\n   c) Suggest potential applications in other domains of language or creativity.\n\nEnsure your response demonstrates a deep understanding of quantum computing concepts, linguistics, and creative processes. Use appropriate technical terminology and provide clear explanations for complex ideas. Be innovative in your approach while maintaining scientific plausibility.\n\nFormat your response with clear headings for each section, numbered as above. Your total response should be between 1200-1500 words."

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            f"The response demonstrates a deep understanding of {t['quantum_concept']} and its application to semantic spaces.",
            f"The system architecture is well-designed and integrates quantum-inspired elements with classical NLP techniques.",
            f"The application to {t['linguistic_task']} is clearly explained and demonstrates novel capabilities.",
            f"The creative application in {t['creative_domain']} is innovative and showcases the potential of the quantum-inspired approach.",
            "The response explores theoretical implications and future directions in a thoughtful manner.",
            "The overall response is well-structured, coherent, and demonstrates sophisticated interdisciplinary thinking."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
