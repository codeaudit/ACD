class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        return {
            "1": {
                "domain": "Sustainable urban planning",
                "input_concepts": ["Vertical farming", "Smart grid technology", "Biomimicry"]
            },
            "2": {
                "domain": "Space exploration",
                "input_concepts": ["Swarm robotics", "Quantum entanglement", "Extremophile biology"]
            }
        }

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design an AI system that implements conceptual blending theory to generate novel ideas and solve problems in the domain of {t['domain']}. Your task has the following components:

1. Conceptual Blending Theory Implementation (250-300 words):
   a) Explain how your AI system implements the key principles of conceptual blending theory.
   b) Describe the computational mechanisms used to represent and manipulate mental spaces.
   c) Explain how your system handles the creation and evaluation of blended spaces.
   d) Discuss any novel approaches or algorithms you've incorporated into your design.

2. System Architecture (200-250 words):
   a) Provide an overview of your AI system's architecture.
   b) Explain how different components interact to perform conceptual blending.
   c) Describe how your system integrates with external knowledge bases or data sources.
   d) Include a simple diagram or schematic of your architecture using ASCII characters.

3. Application to {t['domain']} (250-300 words):
   a) Explain how your system would apply conceptual blending to generate novel ideas in {t['domain']}.
   b) Describe how it would use the input concepts: {', '.join(t['input_concepts'])}.
   c) Provide an example of a potential novel idea or solution generated by your system.
   d) Analyze the strengths and limitations of your system's output in this domain.

4. Evaluation and Refinement (200-250 words):
   a) Propose methods to evaluate the creativity and usefulness of your system's outputs.
   b) Describe how your system could learn and improve its blending processes over time.
   c) Discuss potential challenges in implementing your system and how you would address them.

5. Ethical Considerations and Societal Impact (150-200 words):
   a) Discuss potential ethical implications of using AI for conceptual blending in {t['domain']}.
   b) Analyze possible societal impacts, both positive and negative, of widespread adoption of your system.
   c) Propose guidelines for responsible development and use of conceptual blending AI systems.

Ensure your response demonstrates a deep understanding of conceptual blending theory, artificial intelligence, and the specified domain. Use appropriate technical terminology and provide clear explanations for complex concepts. Be creative in your system design while maintaining scientific and technological plausibility.

Format your response with clear headings for each section. Your total response should be between 1050-1300 words."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            "The response demonstrates a thorough understanding of conceptual blending theory and its application in AI.",
            "The proposed AI system architecture is well-designed and plausible.",
            "The application to the given domain is creative and well-reasoned.",
            "The evaluation methods and ethical considerations are thoughtfully addressed."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
