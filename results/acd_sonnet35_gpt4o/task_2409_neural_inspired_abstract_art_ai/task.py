import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        tasks = [
            {
                'visual_processing_mechanism': 'Hierarchical feature detection',
                'artistic_style': 'Geometric abstraction',
                'cognitive_process': 'Analogical reasoning'
            },
            {
                'visual_processing_mechanism': 'Parallel distributed processing',
                'artistic_style': 'Abstract expressionism',
                'cognitive_process': 'Conceptual blending'
            },
            {
                'visual_processing_mechanism': 'Predictive coding',
                'artistic_style': 'Surrealism',
                'cognitive_process': 'Divergent thinking'
            }
        ]
        return {str(i+1): task for i, task in enumerate(random.sample(tasks, 2))}

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design a neural-inspired AI system for generating and analyzing abstract art, incorporating the following elements:

1. Visual Processing Mechanism: {t['visual_processing_mechanism']}
2. Artistic Style: {t['artistic_style']}
3. Cognitive Process: {t['cognitive_process']}

Your task is to create a detailed proposal for this system, including:

1. System Architecture (250-300 words):
   - Describe the overall structure of your neural-inspired AI system.
   - Explain how it incorporates the given visual processing mechanism, artistic style, and cognitive process.
   - Detail the main components and their interactions, including both the generative and analytical aspects.
   - Include a high-level diagram or pseudocode representing the system's workflow.

2. Neural Basis (200-250 words):
   - Explain how your system mimics or is inspired by human neural processes in visual perception and creativity.
   - Describe specific neural mechanisms or brain regions that inform your design.
   - Discuss how the system implements the given visual processing mechanism.

3. Artistic Style Implementation (200-250 words):
   - Detail how your system generates art in the specified artistic style.
   - Explain the key features or techniques used to achieve this style.
   - Describe how the system ensures variability and uniqueness in its creations.

4. Cognitive Process Integration (200-250 words):
   - Explain how the specified cognitive process is implemented in your system.
   - Describe how this process contributes to both art generation and analysis.
   - Discuss any novel approaches you've taken to model this cognitive process in an AI system.

5. Art Analysis Capabilities (200-250 words):
   - Describe how your system analyzes and interprets abstract art.
   - Explain the key metrics or features the system uses in its analysis.
   - Discuss how the system's analysis capabilities could be validated or compared to human art critics.

6. Ethical and Philosophical Implications (150-200 words):
   - Discuss the potential impact of your system on the art world and human creativity.
   - Address any ethical concerns related to AI-generated art and its analysis.
   - Explore the philosophical questions raised by a system that can both create and critique art.

7. Example Output (100-150 words):
   - Provide a detailed description of a hypothetical piece of abstract art generated by your system.
   - Explain how this piece reflects the given artistic style and cognitive process.
   - Describe how your system would analyze and interpret this piece.

Ensure your response demonstrates a deep understanding of neuroscience, artificial intelligence, and art theory. Be creative and innovative in your approach while maintaining scientific and technological plausibility. Use appropriate terminology from all relevant fields and provide explanations where necessary.

Format your response using clear headings for each section. Your total response should be between 1300-1600 words.
"""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            "The response demonstrates a deep understanding of neuroscience, artificial intelligence, and art theory.",
            "The system architecture is well-designed, clearly incorporates all required elements, and includes a high-level diagram or pseudocode.",
            "The neural basis of the system is well-explained and plausibly connected to human neural processes.",
            "The implementation of the specified artistic style is clear and convincing.",
            "The integration of the given cognitive process is well-explained and innovative.",
            "The art analysis capabilities are well-described and include specific metrics or features.",
            "The ethical and philosophical implications are thoughtfully discussed.",
            "The example output is detailed and clearly reflects the given artistic style and cognitive process.",
            "The response is creative and innovative while maintaining scientific and technological plausibility.",
            "The response follows the specified format with clear headings for each section.",
            "The total word count is between 1300-1600 words.",
            "The response does not contain any direct contradictions or logical inconsistencies.",
            "The proposed system demonstrates a clear and novel approach to AI-generated and AI-analyzed art."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
