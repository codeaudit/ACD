import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        linguistic_phenomena = [
            "semantic ambiguity",
            "syntactic recursion",
            "metaphor comprehension",
            "rapid serial visual presentation"
        ]
        quantum_principles = [
            "superposition",
            "entanglement",
            "quantum tunneling",
            "decoherence"
        ]
        cognitive_processes = [
            "working memory",
            "attention allocation",
            "semantic network activation",
            "decision making"
        ]
        return {
            "1": {
                "linguistic_phenomenon": random.choice(linguistic_phenomena),
                "quantum_principle": random.choice(quantum_principles),
                "cognitive_process": random.choice(cognitive_processes)
            },
            "2": {
                "linguistic_phenomenon": random.choice(linguistic_phenomena),
                "quantum_principle": random.choice(quantum_principles),
                "cognitive_process": random.choice(cognitive_processes)
            }
        }

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design a quantum computing simulation that models potential quantum effects in human language processing and cognition, focusing on the linguistic phenomenon of {t['linguistic_phenomenon']}, the quantum principle of {t['quantum_principle']}, and the cognitive process of {t['cognitive_process']}. Then, use your simulation to analyze a complex linguistic task. Your response should include:

1. Quantum Cognitive Model (300-350 words):
   a) Describe the key components of your quantum cognitive model.
   b) Explain how you integrate {t['quantum_principle']} into modeling {t['linguistic_phenomenon']}.
   c) Detail how your model represents and processes {t['cognitive_process']}.
   d) Provide a visual representation or schematic of your model (described textually).

2. Simulation Architecture (250-300 words):
   a) Outline the quantum computing architecture used in your simulation.
   b) Explain how classical and quantum components interact in your system.
   c) Describe any novel quantum algorithms or approaches used in your simulation.

3. Novel Quantum Algorithm (200-250 words):
   a) Propose a new quantum algorithm specifically designed to model {t['linguistic_phenomenon']} and {t['cognitive_process']}.
   b) Explain how your algorithm leverages {t['quantum_principle']} to achieve its purpose.
   c) Discuss the potential advantages of your algorithm over classical approaches.

4. Linguistic Phenomenon Analysis (200-250 words):
   a) Analyze how {t['linguistic_phenomenon']} might be influenced by quantum effects.
   b) Propose a hypothesis about how {t['quantum_principle']} could explain aspects of {t['linguistic_phenomenon']}.
   c) Discuss potential experimental evidence that could support or refute your hypothesis.

5. Cognitive Process Integration (200-250 words):
   a) Explain how your model simulates {t['cognitive_process']} using quantum principles.
   b) Compare your quantum approach to classical models of {t['cognitive_process']}.
   c) Discuss potential advantages or insights gained from the quantum perspective.

6. Simulation Experiment (250-300 words):
   a) Design a linguistic task that leverages your quantum cognitive model.
   b) Describe the input, processing steps, and expected output of your simulation.
   c) Analyze the results, focusing on how quantum effects influence the outcome.
   d) Compare your simulation results to what would be expected from classical models.

7. Case Study (200-250 words):
   a) Apply your quantum cognitive model to a specific real-world language processing scenario.
   b) Analyze how your model explains or predicts behavior in this scenario.
   c) Discuss any novel insights or predictions generated by your quantum approach.

8. Implications and Future Directions (150-200 words):
   a) Discuss the broader implications of your model for our understanding of cognition and language.
   b) Propose two potential applications of your quantum cognitive model in linguistics or cognitive science.
   c) Suggest future research directions to further explore quantum effects in language and cognition.

9. Limitations and Ethical Considerations (100-150 words):
   a) Identify potential limitations or criticisms of your quantum cognitive model.
   b) Discuss ethical implications of simulating quantum effects in human cognition.
   c) Propose guidelines for responsible development and use of quantum cognitive models.

Ensure your response demonstrates a deep understanding of quantum computing principles, cognitive science, and linguistics. Use appropriate technical terminology and provide clear explanations for complex concepts. Be innovative in your approach while maintaining scientific plausibility.

Format your response with clear headings for each section, numbered as above. Use markdown formatting for headings and subheadings. Include relevant equations using LaTeX notation where appropriate. Your total response should be between 1850-2300 words."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            f"The quantum cognitive model must coherently integrate {t['quantum_principle']}, {t['linguistic_phenomenon']}, and {t['cognitive_process']}.",
            "The simulation architecture must clearly describe both classical and quantum components and their interactions.",
            f"A novel quantum algorithm must be proposed that specifically addresses {t['linguistic_phenomenon']} and {t['cognitive_process']}.",
            f"The linguistic phenomenon analysis must present a plausible hypothesis linking {t['quantum_principle']} to {t['linguistic_phenomenon']}.",
            f"The cognitive process integration must demonstrate how {t['cognitive_process']} is simulated using quantum principles and compare it to classical models.",
            "The simulation experiment must be well-designed and clearly demonstrate how quantum effects influence the outcome.",
            "The case study must apply the quantum cognitive model to a specific real-world scenario and generate novel insights.",
            "The response must discuss broader implications, future directions, and ethical considerations of quantum cognitive models.",
            "The overall response must demonstrate a deep understanding of quantum computing, cognitive science, and linguistics, using appropriate terminology from all fields.",
            "The response must adhere to the specified formatting guidelines, including markdown headings and LaTeX equations where appropriate."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
