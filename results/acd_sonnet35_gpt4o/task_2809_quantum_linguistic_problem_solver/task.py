import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        abstract_concepts = [
            "entanglement", "superposition", "wave-particle duality",
            "uncertainty", "quantum tunneling", "decoherence",
            "quantum interference", "quantum measurement"
        ]
        problem_domains = [
            "ethics", "economics", "cognitive science", "social dynamics",
            "environmental systems", "political theory", "art and creativity",
            "education"
        ]
        return {
            "1": {
                "concept": random.choice(abstract_concepts),
                "domain": random.choice(problem_domains)
            },
            "2": {
                "concept": random.choice(abstract_concepts),
                "domain": random.choice(problem_domains)
            }
        }

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design a quantum-inspired language model based on the quantum concept of '{t['concept']}' and use it to solve an abstract problem in the domain of {t['domain']}. Your response should include:

1. Quantum-Inspired Language Model (300-350 words):
   a) Explain how you incorporate the quantum concept of '{t['concept']}' into a language model.
   b) Describe the key features and structure of your quantum-inspired language model.
   c) Discuss how your model differs from traditional language models.
   d) Provide a simple example of how your model would represent and process information.

2. Quantum-Linguistic Mapping (200-250 words):
   a) Explain your approach to mapping quantum concepts to linguistic elements.
   b) Discuss how your model represents semantic meaning using quantum-inspired techniques.
   c) Describe any novel linguistic structures or operations enabled by your quantum-inspired approach.

3. Problem Formulation (200-250 words):
   a) Present a complex, abstract problem from the domain of {t['domain']}.
   b) Explain how this problem can be represented and analyzed using your quantum-inspired language model.
   c) Discuss any advantages your model offers in approaching this type of problem.

4. Solution Process (250-300 words):
   a) Describe step-by-step how your quantum-inspired language model would approach solving the problem.
   b) Explain how quantum concepts are leveraged in the problem-solving process.
   c) Discuss any potential quantum advantages (e.g., superposition, entanglement) in your solution method.

5. Results and Interpretation (200-250 words):
   a) Present the solution or insights generated by your model for the given problem.
   b) Explain how to interpret these results in the context of both quantum mechanics and {t['domain']}.
   c) Discuss any novel or unexpected outcomes from your quantum-inspired approach.

6. Limitations and Future Directions (200-250 words):
   a) Acknowledge potential limitations of your quantum-inspired language model.
   b) Discuss challenges in implementing or scaling this approach.
   c) Propose future research directions or improvements for quantum-linguistic problem-solving.

Ensure your response demonstrates a deep understanding of quantum mechanics, computational linguistics, and the problem domain. Be creative and innovative in your approach while maintaining scientific plausibility. Use appropriate technical terminology and provide clear explanations where necessary.

Format your response with clear headings for each section, and use subheadings (a, b, c) where indicated. Your total response should be between 1350-1650 words. Begin each section with its respective heading (e.g., '1. Quantum-Inspired Language Model:') and use subheadings (a, b, c) within each section."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            f"The response demonstrates a deep understanding of the quantum concept '{t['concept']}' and its application to language modeling.",
            "The quantum-inspired language model is innovative, well-explained, and plausibly grounded in both quantum mechanics and linguistics.",
            f"The problem formulation and solution process in the domain of {t['domain']} effectively leverage the quantum-inspired language model.",
            "The response shows exceptional interdisciplinary reasoning, creativity, and problem-solving skills.",
            "The limitations and future directions are insightfully discussed, demonstrating a nuanced understanding of the challenges and potential of this approach.",
            "The response adheres to the specified format and word count requirements."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
