import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        language_pairs = [
            ("Mandarin", "English"),
            ("Spanish", "Arabic"),
            ("Hindi", "French"),
            ("Russian", "Japanese")
        ]
        acquisition_stages = [
            "early phonological development",
            "first word combinations",
            "complex sentence formation",
            "pragmatic competence"
        ]
        cognitive_aspects = [
            "working memory",
            "attention control",
            "metalinguistic awareness",
            "executive functions"
        ]
        return {
            "1": {
                "language_pair": random.choice(language_pairs),
                "acquisition_stage": random.choice(acquisition_stages),
                "cognitive_aspect": random.choice(cognitive_aspects)
            },
            "2": {
                "language_pair": random.choice(language_pairs),
                "acquisition_stage": random.choice(acquisition_stages),
                "cognitive_aspect": random.choice(cognitive_aspects)
            }
        }

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design an AI system that simulates and analyzes language acquisition in multilingual environments, focusing on the language pair {t['language_pair'][0]} and {t['language_pair'][1]}, the acquisition stage of {t['acquisition_stage']}, and the cognitive aspect of {t['cognitive_aspect']}. Then, use your system to explore the implications for cognitive development and AI language models. Your response should include:

1. System Architecture (300-350 words):
   a) Describe the key components of your AI system for simulating multilingual language acquisition.
   b) Explain how your system models the specified acquisition stage and cognitive aspect.
   c) Detail how the system incorporates and differentiates between the two languages in the given pair.
   d) Discuss any novel AI techniques or cognitive modeling approaches you've incorporated.
   e) Include a visual representation (in ASCII art or text-based diagram) of your system's architecture.

2. Acquisition Simulation Process (250-300 words):
   a) Outline the step-by-step process of how your AI system simulates language acquisition.
   b) Explain how it handles the interaction between the two languages during the acquisition process.
   c) Describe how your system models the specified cognitive aspect in relation to language learning.
   d) Discuss how your approach differs from traditional monolingual language acquisition models.

3. Linguistic Analysis (250-300 words):
   a) Analyze the simulated language development patterns in your multilingual environment.
   b) Compare these patterns to known theories and empirical findings in bilingual language acquisition.
   c) Discuss any novel insights or predictions generated by your model.
   d) Explain how your system handles language-specific features (e.g., phonology, syntax) of the given language pair.

4. Cognitive Development Implications (200-250 words):
   a) Discuss the implications of your model's findings for theories of cognitive development in multilingual contexts.
   b) Analyze how the simulated multilingual acquisition process affects the specified cognitive aspect.
   c) Propose a hypothesis about multilingual cognitive development that could be tested using your system.

5. AI Language Model Enhancement (200-250 words):
   a) Explain how insights from your multilingual acquisition simulator could be applied to improve AI language models.
   b) Discuss potential advantages of incorporating multilingual acquisition principles in language model training.
   c) Propose a specific enhancement to existing language models based on your system's findings.

6. Ethical Considerations and Limitations (150-200 words):
   a) Identify potential ethical issues in using AI to model child language acquisition.
   b) Discuss the limitations of your model and how they might affect its applicability.
   c) Propose guidelines for the responsible development and use of such AI systems in linguistic research.

7. Future Research Directions (100-150 words):
   a) Suggest two potential extensions or applications of your system.
   b) Briefly describe how these developments could contribute to linguistics, cognitive science, or AI research.

Ensure your response demonstrates a deep understanding of linguistics, cognitive science, and artificial intelligence. Use appropriate technical terminology and provide clear explanations for complex concepts. Be innovative in your approach while maintaining scientific plausibility.

Format your response with clear headings for each section and number your paragraphs within each section. Your total response should be between 1450-1800 words."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            f"The response demonstrates a clear understanding of language acquisition processes, particularly in the context of {t['language_pair'][0]} and {t['language_pair'][1]} as a language pair.",
            f"The AI system effectively models the {t['acquisition_stage']} stage of language acquisition and incorporates the cognitive aspect of {t['cognitive_aspect']}.",
            "The system architecture and simulation process are well-explained and scientifically plausible.",
            "The linguistic analysis provides novel insights and compares them to existing theories in bilingual language acquisition.",
            "The response includes a visual representation (ASCII art or text-based diagram) of the system's architecture.",
            "The implications for cognitive development and AI language model enhancement are thoughtfully discussed and supported by the model's findings.",
            "Ethical considerations and limitations of the model are addressed, with responsible guidelines proposed.",
            "The response demonstrates interdisciplinary knowledge integration, combining concepts from linguistics, cognitive science, and artificial intelligence throughout all sections."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
