class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        return {
            "1": {"musical_style": "Baroque", "target_emotion": "awe"},
            "2": {"musical_style": "Jazz", "target_emotion": "nostalgia"}
        }

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design an AI system that can analyze and generate music based on neuroscientific principles of auditory perception and emotional response. Then, apply your system to create a piece in the {t['musical_style']} style that evokes the emotion of {t['target_emotion']}. Your response should include:

1. Neuroscientific Framework (250-300 words):
   a) Explain the key neuroscientific principles of auditory perception and emotional response to music that your AI system incorporates.
   b) Describe how these principles inform the music analysis and generation processes in your system.
   c) Discuss any novel approaches you've taken to model the relationship between musical features and neural responses.

2. AI System Architecture (300-350 words):
   a) Provide a detailed overview of your AI system's architecture, including its main components and their interactions.
   b) Explain how your system integrates neuroscientific models with music theory and AI algorithms.
   c) Describe the data inputs, processing stages, and outputs of your system.
   d) Include a high-level diagram or flowchart of your AI system's architecture (describe it textually).

3. Music Analysis Process (200-250 words):
   a) Explain how your AI system analyzes existing music to understand its structural and emotional characteristics.
   b) Describe the features and patterns your system identifies in {t['musical_style']} music.
   c) Discuss how your system correlates musical elements with neural responses and emotional states.

4. Music Generation Process (250-300 words):
   a) Detail the steps your AI system takes to generate new music in the {t['musical_style']} style.
   b) Explain how your system incorporates neuroscientific principles to evoke the emotion of {t['target_emotion']}.
   c) Describe any constraints or guidelines your system uses to ensure stylistic consistency.
   d) Provide a specific example of how your system would generate a musical phrase or motif to evoke {t['target_emotion']}.

5. Evaluation and Refinement (200-250 words):
   a) Propose a method for evaluating the effectiveness of your AI-generated music in evoking the target emotion.
   b) Describe how you would incorporate human feedback to refine and improve your system's outputs.
   c) Discuss potential challenges in objectively measuring emotional responses to music and how your system addresses them.

6. Ethical and Cultural Considerations (150-200 words):
   a) Discuss the ethical implications of using AI to generate emotionally evocative music.
   b) Address concerns about cultural appropriation or misrepresentation in AI-generated music.
   c) Propose guidelines for the responsible development and use of neuro-musical AI systems.

7. Future Directions and Applications (150-200 words):
   a) Suggest potential applications of your neuro-musical AI system beyond composition (e.g., music therapy, cognitive research).
   b) Propose two areas for future research that could enhance the capabilities of your system.
   c) Discuss how advancements in this field might impact our understanding of music, emotion, and the human brain.

8. Sample Output (Not included in word count):
   Provide a textual description of a 30-second musical piece generated by your AI system, including:
   a) Key musical elements (e.g., tempo, key, instrumentation)
   b) Structural components (e.g., melody, harmony, rhythm)
   c) Specific techniques used to evoke the target emotion
   d) How the piece reflects the chosen musical style

Ensure your response demonstrates a deep understanding of neuroscience, music theory, and artificial intelligence. Use appropriate technical terminology and provide clear explanations for complex concepts. Be innovative in your approach while maintaining scientific plausibility.

Format your response with clear headings for each section. Your total response should be between 1500-1850 words (excluding the Sample Output section)."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            "The response demonstrates a deep understanding of neuroscience, music theory, and artificial intelligence, with accurate use of technical terminology.",
            "The AI system design effectively integrates neuroscientific principles with music analysis and generation, showing a clear connection between brain function and musical elements.",
            "The music generation process is well-explained and plausibly incorporates the specified musical style and target emotion, with concrete examples provided.",
            "The response addresses ethical considerations and potential applications of the technology, showing awareness of cultural sensitivities and societal impact.",
            "The sample output description accurately reflects the chosen musical style and provides a clear connection to the target emotion through specific musical elements.",
            "The writing is clear, well-structured, and within the specified word count range, with all required sections adequately addressed."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
