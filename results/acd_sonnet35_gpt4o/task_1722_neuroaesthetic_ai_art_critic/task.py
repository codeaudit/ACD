import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        art_movements = [
            "Impressionism",
            "Cubism",
            "Surrealism",
            "Abstract Expressionism"
        ]
        neuroscience_principles = [
            "Visual processing pathways",
            "Emotional regulation in the limbic system",
            "Cognitive biases in perception",
            "Mirror neuron system"
        ]
        ai_techniques = [
            "Generative Adversarial Networks (GANs)",
            "Style Transfer",
            "Evolutionary Algorithms",
            "Transformer-based Image Generation"
        ]
        
        tasks = {}
        for i in range(1, 3):
            movement = random.choice(art_movements)
            principle = random.choice(neuroscience_principles)
            technique = random.choice(ai_techniques)
            tasks[str(i)] = {"movement": movement, "principle": principle, "technique": technique}
        return tasks

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"Design an AI system that uses principles of neuroscience and art history to analyze and generate critiques of artworks, then apply it to evaluate AI-generated art. Your system should focus on the art movement of {t['movement']}, incorporate the neuroscience principle of {t['principle']}, and evaluate art created using the AI technique of {t['technique']}. Provide your response in the following format:\n\n1. System Architecture (250-300 words):\n   a) Describe the key components of your neuroaesthetic AI art critic system.\n   b) Explain how it incorporates the specified neuroscience principle into its analysis.\n   c) Detail how the system recognizes and evaluates characteristics of the given art movement.\n   d) Discuss any novel features or innovations in your design.\n\n2. Neuroscience-Art Integration (200-250 words):\n   a) Analyze how the specified neuroscience principle relates to the perception and appreciation of the given art movement.\n   b) Explain how your system models this relationship in its critiquing process.\n   c) Discuss any challenges in integrating neuroscientific principles with art historical analysis.\n\n3. AI Art Evaluation (250-300 words):\n   a) Describe how your system would evaluate art created using the specified AI technique.\n   b) Provide a sample critique generated by your system for a hypothetical AI-generated artwork.\n   c) Explain how the critique reflects both neuroscientific and art historical considerations.\n\n4. Comparative Analysis (200-250 words):\n   a) Compare your system's approach to traditional art criticism.\n   b) Discuss potential advantages and limitations of a neuroaesthetic AI art critic.\n   c) Analyze how this approach might provide new insights into both human and AI-generated art.\n\n5. Ethical and Philosophical Implications (150-200 words):\n   a) Discuss the ethical considerations of using AI to critique art.\n   b) Explore the philosophical implications of applying neuroscientific principles to aesthetic judgment.\n   c) Consider how this technology might impact the art world and public perception of art.\n\n6. Future Developments (150-200 words):\n   a) Propose potential improvements or expansions to your system.\n   b) Suggest how this technology could be applied in other domains of aesthetic or cultural analysis.\n   c) Discuss how advancements in neuroscience or AI might further enhance such systems in the future.\n\nEnsure your response demonstrates a deep understanding of neuroscience, art history, and artificial intelligence. Use technical terminology appropriately and provide clear explanations where necessary. Be creative in your approach while maintaining scientific and artistic plausibility.\n\nFormat your response with clear headings for each section, and address all subpoints. Your total response should be between 1200-1500 words."

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            "The response demonstrates a clear understanding of the specified art movement, neuroscience principle, and AI technique",
            "The proposed system design is creative, detailed, and scientifically plausible",
            "The integration of neuroscience and art history is well-explained and logically sound",
            "The AI art evaluation process is thoroughly described and includes a plausible sample critique",
            "Ethical and philosophical implications are thoughtfully considered",
            "The response shows strong interdisciplinary integration of neuroscience, art history, and artificial intelligence"
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0