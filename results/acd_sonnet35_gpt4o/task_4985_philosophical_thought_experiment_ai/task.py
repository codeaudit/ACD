import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        thought_experiments = [
            {
                "name": "The Chinese Room",
                "philosopher": "John Searle",
                "focus": "Consciousness and Understanding",
                "ethical_dimension": "AI Rights and Personhood"
            },
            {
                "name": "The Experience Machine",
                "philosopher": "Robert Nozick",
                "focus": "Hedonism and Well-being",
                "ethical_dimension": "Virtual Reality Ethics"
            }
        ]
        return {
            "1": random.choice(thought_experiments),
            "2": random.choice(thought_experiments)
        }

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"Design an AI system to model and simulate the philosophical thought experiment '{t['name']}' by {t['philosopher']}, focusing on {t['focus']}. Then, analyze its implications for our understanding of mind, consciousness, and ethics, particularly in relation to {t['ethical_dimension']}. Your response should include the following sections:\n\n1. AI System Architecture (300-350 words):\n   a) Describe the key components of your AI system for simulating the thought experiment.\n   b) Explain how your system models consciousness or ethical reasoning, as relevant to the experiment.\n   c) Detail any novel approaches or technologies used in your design.\n   d) Discuss how your system interfaces with or represents human cognition and decision-making.\n\n2. Thought Experiment Simulation (250-300 words):\n   a) Explain how your AI system simulates the specific thought experiment.\n   b) Describe the parameters and variables your system considers.\n   c) Discuss how your system handles ambiguities or subjective elements of the experiment.\n\n3. Analysis and Insights (250-300 words):\n   a) Analyze the results of your AI simulation of the thought experiment.\n   b) Discuss any novel insights or perspectives generated by your system.\n   c) Compare your AI-generated analysis to traditional philosophical interpretations of the experiment.\n\n4. Ethical Implications (200-250 words):\n   a) Explore the ethical implications of using AI to simulate philosophical thought experiments.\n   b) Discuss potential impacts on our understanding of {t['ethical_dimension']}.\n   c) Propose guidelines for the responsible development and use of such AI systems in philosophy.\n\n5. Limitations and Future Directions (150-200 words):\n   a) Identify current limitations of your AI system in modeling complex philosophical concepts.\n   b) Suggest potential improvements or extensions to your system.\n   c) Propose a novel research question that arises from your AI's simulation of the thought experiment.\n\nEnsure your response demonstrates a deep understanding of artificial intelligence, neuroscience, and philosophy. Use appropriate technical terminology and provide clear explanations for complex concepts. Be innovative in your approach while maintaining scientific and philosophical rigor.\n\nFormat your response with clear headings for each section. Your total response should be between 1150-1400 words."

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            "The response demonstrates a deep understanding of the specified philosophical thought experiment and its implications.",
            "The AI system design is innovative, well-explained, and plausibly capable of simulating the thought experiment.",
            "The analysis provides novel insights or perspectives on the thought experiment.",
            "The ethical implications are thoroughly explored, particularly in relation to the specified ethical dimension.",
            "The response shows a strong grasp of relevant concepts from AI, neuroscience, and philosophy.",
            "The proposed limitations and future directions are thoughtful and scientifically grounded."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
