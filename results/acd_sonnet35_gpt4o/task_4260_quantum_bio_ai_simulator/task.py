import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        quantum_principles = [
            "Superposition",
            "Entanglement",
            "Quantum tunneling",
            "Quantum annealing"
        ]
        biological_processes = [
            "Protein folding",
            "Enzyme catalysis",
            "DNA replication",
            "Cell signaling"
        ]
        ai_techniques = [
            "Quantum neural networks",
            "Quantum-inspired evolutionary algorithms",
            "Quantum Boltzmann machines",
            "Quantum-classical hybrid models"
        ]
        
        tasks = [
            {
                "quantum_principle": random.choice(quantum_principles),
                "biological_process": random.choice(biological_processes),
                "ai_technique": random.choice(ai_techniques)
            } for _ in range(2)
        ]
        
        return {str(i+1): task for i, task in enumerate(tasks)}

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design a quantum-inspired AI system to simulate and predict the {t['biological_process']} process, leveraging the quantum principle of {t['quantum_principle']} and using {t['ai_technique']} as your primary AI approach. Your response should include the following sections:

1. System Architecture (300-350 words):
   a) Describe the key components of your quantum-inspired AI system for biological simulation.
   b) Explain how you integrate {t['quantum_principle']} into your system design.
   c) Detail how your system models and predicts the {t['biological_process']} process.
   d) Discuss how your AI system interfaces with classical biological data and quantum computations.

2. Quantum-Biological Interface (250-300 words):
   a) Explain how your system translates biological data into a quantum-compatible format.
   b) Describe the mapping between quantum states and biological states in your model.
   c) Discuss challenges in this translation process and how you address them.

3. AI Algorithm Design (250-300 words):
   a) Detail the implementation of {t['ai_technique']} in your system.
   b) Explain how this algorithm incorporates both quantum and biological principles.
   c) Describe how the algorithm ensures biological accuracy and computational efficiency.

4. Simulation and Prediction Capabilities (200-250 words):
   a) Provide a specific example of how your system would simulate and predict an aspect of {t['biological_process']}.
   b) Compare the potential accuracy and speed of your system to classical simulation methods.
   c) Discuss any unique insights your quantum-inspired approach might offer.

5. Validation and Experimental Design (200-250 words):
   a) Propose a method to validate the predictions of your quantum-bio-AI system.
   b) Design an experiment to test a specific hypothesis generated by your system.
   c) Discuss potential challenges in experimental validation and how to overcome them.

6. Ethical Considerations and Future Implications (150-200 words):
   a) Identify potential ethical concerns related to using quantum-inspired AI in biological research.
   b) Discuss the potential impact of your system on drug discovery, personalized medicine, or other relevant fields.
   c) Propose guidelines for responsible development and use of quantum-bio-AI systems.

Ensure your response demonstrates a deep understanding of quantum computing, molecular biology, and artificial intelligence. Use appropriate technical terminology and provide clear explanations for complex concepts. Be innovative in your approach while maintaining scientific plausibility.

Format your response with clear headings for each section. Your total response should be between 1350-1650 words."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            f"The response should address the specific quantum principle of {t['quantum_principle']}, biological process of {t['biological_process']}, and AI technique of {t['ai_technique']}",
            "The design should clearly integrate principles from quantum computing, molecular biology, and artificial intelligence",
            "The response should include all required sections: System Architecture, Quantum-Biological Interface, AI Algorithm Design, Simulation and Prediction Capabilities, Validation and Experimental Design, and Ethical Considerations and Future Implications",
            "The proposed system should be innovative while maintaining scientific plausibility",
            "The response should demonstrate a deep understanding of the challenges in integrating quantum principles with biological simulations",
            "The discussion should address potential ethical concerns and future implications of quantum-bio-AI systems"
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
