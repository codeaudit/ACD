import random

class TaskFamily:
    @staticmethod
    def get_tasks() -> dict[str, dict]:
        musical_styles = [
            {
                "style": "Jazz Fusion",
                "cognitive_aspect": "Improvisation",
                "quantum_property": "Superposition"
            },
            {
                "style": "Minimalist Classical",
                "cognitive_aspect": "Pattern Recognition",
                "quantum_property": "Entanglement"
            }
        ]
        return {
            "1": random.choice(musical_styles),
            "2": random.choice(musical_styles)
        }

    @staticmethod
    def get_instructions(t: dict) -> str:
        return f"""Design a quantum computing system that simulates cognitive processes involved in music composition, focusing on the musical style of {t['style']}, the cognitive aspect of {t['cognitive_aspect']}, and the quantum property of {t['quantum_property']}. Then, use this system to generate and analyze novel musical pieces. Your response should include:

1. Quantum Cognitive Model (300-350 words):
   a) Describe the architecture of your quantum computing system for simulating music cognition.
   b) Explain how your model incorporates the specified cognitive aspect ({t['cognitive_aspect']}).
   c) Detail how the quantum property ({t['quantum_property']}) is utilized in your system.
   d) Discuss any novel quantum algorithms or techniques used in your model.

2. Music Composition Process (250-300 words):
   a) Explain how your system generates musical compositions in the given style ({t['style']}).
   b) Describe how the cognitive aspect and quantum property interact in the composition process.
   c) Provide a specific example of how a musical element (e.g., melody, harmony, rhythm) is generated using your system.

3. Analysis Framework (200-250 words):
   a) Propose a method for analyzing the musical pieces generated by your system.
   b) Explain how this analysis can provide insights into both music cognition and quantum computation.
   c) Discuss any potential limitations or biases in your analysis approach.

4. Comparative Evaluation (200-250 words):
   a) Compare your quantum cognitive music composition system to traditional AI-based music generation methods.
   b) Discuss potential advantages and disadvantages of your approach.
   c) Speculate on how your system might perform compared to human composers in the specified style.

5. Cognitive and Musical Insights (200-250 words):
   a) Discuss what your system might reveal about human music cognition and creativity.
   b) Explain how the quantum aspects of your model could provide new perspectives on musical structure or perception.
   c) Propose a hypothesis about music cognition that could be tested using your system.

6. Ethical Considerations and Future Directions (150-200 words):
   a) Discuss ethical implications of using quantum-inspired systems to model human creativity.
   b) Explore potential applications of your system in music education or therapy.
   c) Suggest two future research directions that could build upon your quantum cognitive music model.

Ensure your response demonstrates a deep understanding of quantum computing, cognitive science, and music theory. Use appropriate technical terminology and provide clear explanations for complex concepts. Be innovative in your approach while maintaining scientific plausibility.

Format your response with clear headings for each section. Your total response should be between 1300-1600 words."""

    @staticmethod
    def score(t: dict, submission: str) -> float | None:
        from src.eval_helper import eval_with_llm_judge
        instructions = TaskFamily.get_instructions(t)
        criteria = [
            "The response demonstrates a deep understanding of quantum computing, cognitive science, and music theory.",
            "The quantum cognitive model effectively incorporates the specified cognitive aspect and quantum property.",
            "The music composition process is clearly explained and integrates the given musical style.",
            "The analysis framework provides meaningful insights into both music cognition and quantum computation.",
            "The comparative evaluation and cognitive insights sections show critical thinking and innovation.",
            "Ethical considerations and future directions are thoughtfully discussed."
        ]
        return 1.0 if eval_with_llm_judge(instructions, submission, criteria) else 0.0
